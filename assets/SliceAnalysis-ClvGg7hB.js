import{Y as f,n as t,q as r,v as p,bQ as x,eP as L,h$ as b,m5 as m,eQ as w,a9 as S,r as v}from"./index-BnIWgxWw.js";import{c as g}from"./Analysis-CXEU8y4J.js";import{c as E}from"./SlicePlane-DXAt8J9L.js";let a=class extends f{constructor(e){super(e),this.layerId=""}static fromLayer(e){return new this({layerId:e.type==="building-component"?e.layer.id:e.id,sublayerId:e.type==="building-component"?e.id:void 0})}};t([r({type:String,json:{write:{isRequired:!0}}})],a.prototype,"layerId",void 0),t([r({type:Number,json:{write:!0}})],a.prototype,"sublayerId",void 0),a=t([p("esri.analysis.support.SliceAnalysisExcludedLayer")],a);let s=class extends g{constructor(e){super(e),this.type="slice",this.tiltEnabled=!1,this.shape=null,this.excludeGroundSurface=!1}get excludedLayers(){return this._get("excludedLayers")||new x}set excludedLayers(e){this._set("excludedLayers",L(e,this._get("excludedLayers")))}writeExcludedLayers(e,n,d,i){e.length!==0&&(n[d]=e.toArray().map(u=>a.fromLayer(u).toJSON(i)))}readExcludedLayers(e,n,d){const i=d?.initiator;i&&d?.hooks?.onAfterLoad(async()=>{for(const u of e){const{layerId:c,sublayerId:y}=a.fromJSON(u,d),o=i.allLayers.find(({id:l})=>l===c);if(o)if(y!=null&&"allSublayers"in o){await o.load();const l=o.allSublayers.find(({id:h})=>h===y);l&&"type"in l&&l.type==="building-component"&&this.excludedLayers.add(l)}else this.excludedLayers.add(o)}})}get valid(){return this.shape?.position!=null}equals(e){return this===e||super.equals(e)&&b(this.shape,e.shape)&&this.tiltEnabled===e.tiltEnabled&&m(this.excludedLayers.toArray(),e.excludedLayers.toArray())&&this.excludeGroundSurface===e.excludeGroundSurface}clear(){this.shape=null}};t([r({type:["slice"],json:{read:!1,write:{isRequired:!0}}})],s.prototype,"type",void 0),t([r({type:Boolean,nonNullable:!0,json:{write:!0,default:!1}})],s.prototype,"tiltEnabled",void 0),t([r({types:{key:"type",base:null,typeMap:{plane:E},defaultKeyValue:"plane"},json:{write:{isRequired:!0}}})],s.prototype,"shape",void 0),t([r({cast:w,clonable:e=>e.slice(),json:{type:[a],write:!0}})],s.prototype,"excludedLayers",null),t([S("excludedLayers")],s.prototype,"writeExcludedLayers",null),t([v("excludedLayers")],s.prototype,"readExcludedLayers",null),t([r({type:Boolean,nonNullable:!0,json:{write:!0}})],s.prototype,"excludeGroundSurface",void 0),t([r({readOnly:!0})],s.prototype,"valid",null),s=t([p("esri.analysis.SliceAnalysis")],s);const q=s;export{q as default};
